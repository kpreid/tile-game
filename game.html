<html>
  <title>CI272 Final Project - Tile Game - by Kevin Reid</title>
  <style>
    /* --- layout --- */
    html {
      margin: 0;
      padding: 0;
    }
    body {
      margin: 0;
      padding: 0;
    }
    .presidebar {
      width: 13em;
      display: table-cell;
      float: right;
      background: #EEE;
      border-right: 1px outset #EEE;
      height: 100%;
    }
    .presidebar > * {
      margin: .3em;
    }
    .viewport {
      z-index: 0;
      /*margin-right: 13em; -- for sidebar, now removed */
      height: 100%;
      background: black;
    }
    .viewport-mid {
      /*display: table;*/
      display: table;
      height: 100%;
      margin: auto;
    }
    .playfield {
      display: table-cell;
      vertical-align: middle;
      /*margin: auto;*/
    }
    
    .overlay {
      position: fixed;

      /* Note: According to http://www.w3.org/TR/CSS2/visuren.html#z-index,
         that .viewport has a z-index of 0 ought to make this and that a
         separate stacking context from the contents of the viewport, but
         that doesn't seem to work that way. So this z-index is very large
         to get in front of all of the tiles. */
      z-index: 100000000;

      padding: .3em;
      font-family: sans-serif;

      background: black;
      color: white;
      opacity: .7;
      -webkit-border-radius: .5em;
      -moz-border-radius: .5em;
      -webkit-box-shadow: inset 0 0 .3em .0em white, 0 0 .3em .0em white;
      -moz-box-shadow: inset 0 0 .3em .0em white, 0 0 .3em .0em white;
    }
    
    .inventory-frame {
      left: .7em;
      bottom: .7em;
    }
    .inventory {
      display: block;
      text-align: center;
      height: 4em;
      margin-top: -10%; /* kludge for images */
    }
    .inventory img {
      display: inline;
      height: 100%;
    }
    
    .instructions {
      right: .7em;
      top: .7em;
      min-width: 8em;
      max-width: 15em;
      width: 30%;
    }
    .instructions p:first-child { margin-top: 0; }
    .instructions p:first-child + p { margin-bottom: 0; }
    
  </style>
  <script type="text/javascript" src="IVector.js"></script>
  <script type="text/javascript" src="Tile.js"></script>
  <script type="text/javascript" src="World.js"></script>
  <script type="text/javascript" src="GameState.js"></script>
  <script type="text/javascript" src="GameView.js"></script>
  <script type="text/javascript" src="Map.js"></script>
  <script>
    var gameState = new GameState(gameMap);
    var gameView;
    window.onresize = function () { 
      if (gameView != undefined) gameView.onresize();
    };
  </script>
</head>
<body onload="
  gameView = new GameView(gameState, document.getElementById('playfield'), document.getElementById('viewport'), document.getElementById('state'), document.getElementById('inventory'));
  document.onkeydown = gameView.onkeydown;
">

<!-- TODO: restart and about commands -->
<div id="viewport" class="viewport">
  <div class="viewport-mid"> <!-- styling box -->
  <div id="playfield" class="playfield">
    <img src="Resources/Key.png">
  </div>
  </div>
</div>
<div class="overlays">
  <div class="inventory-frame overlay">
    You have:<br>
    <div id="inventory" class="inventory"></div>
  </div>
  <div class="overlay instructions">
    <p>Use arrow keys to move around. The rest is for you to figure out.</p>
    <p id="state"></p>
  </div>
</div>

</body></html>